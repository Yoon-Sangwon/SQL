# 2장. 테이블에서 데이터 검색



## 4강 Hello World 실행하기

> 이제부터는 실제 SQL 명령을 실행하면서 배워보겠습니다. 우선은 SQL 명령의 Hello World라고 할 수 있는 **'SELECT * FROM 테이블명'** 을 실행해보겠습니다. Hello World라는 것은 프로그래밍 언어를 배울 때 가장 처음 만들어보는 아주 간단한 프로그램을 일컫는 말입니다. SQL에서는 SELECT 명령이 Hello World에 해당합니다.



### 4.1 'SELECT * FROM 테이블명' 실행

> **SQL 명령은 mysql 클라이언트에 문자를 입력하여 실행**할 수 있습니다. mysql 클라이언트를 명령 프롬프트에서 실행시킵니다. mysql> 뒤에 SQL 명령을 키보드로 입력합니다.

``` mysql
mysql> SELECT * FROM sample21;
```

SELECT와 '*', FROM 사이에는 공백을 넣어 구분합니다. FROM과 sample21 사이에도 공백이 필요합니다. **사이에 공백이 없다면 에러가 발생해 실행할 수 없습니다**. 입력이 끝나면 **' ; '** 을 입력하고 ENTER키를 누르면 SQL 명령이 서버에 전달되며 서버는 이를 실행한 후 결과를 반환합니다.

---

결과

| no   | name   | birthday   | address           |
| ---- | ------ | ---------- | ----------------- |
| 1    | 박준용 | 1976-10-18 | 대구광역시 수성구 |
| 2    | 김재진 | NULL       | 대구광역시 동구   |
| 3    | 홍길동 | NULL       | 서울특별시 마포구 |

3 rows in set (0.00 sec)

---



### 4.2 SELECT 명령 구문

> SELECT는 DML에 속하는 명령으로 SQL에서 자주 사용됩니다. SELECT 명령으로 DB의 데이터를 읽어올 수 있습니다. SELECT 명령은 '질의'나 '쿼리'라 불리기도 합니다.
>
> SELECT * FROM sample21;
>
> - **SELECT**는 SQL 명령의 한 종류로 'SELECT 명령을 실행하세요' 라는 의미입니다.
> - **애스터리스크(*)는 모든 열을 의미하는 메타문자**입니다. 테이블에는 몇 개의 열이 있는데, *을 사용하면 간단하게 모든 열을 지정할 수 있습니다.
> - **FROM은 처리 대상 테이블을 지정하는 키워드**입니다. FROM 뒤에 테이블명을 지정합니다. **SQL 명령은 키워드에 의해 '구'라는 단위로 나눌 수 있습니다**. 이번 SQL 명령의 경우 **SELECT 구와 FROM 구**로 나눌 수 있습니다. SELECT 명령은 여러 개의 구로 구성되었는데, 추후 설명하겠습니다.
> - sample21은 테이블명입니다. 



### 4.3 예약어와 데이터베이스 객체명

> Hello World에서는 'sample21' 이라는 테이블의 내용을 확인할 수 있었습니다. 다른 테이블의 내용을 보고 싶은 경우에는 FROM 뒤의 테이블명을 재지정하면 됩니다.
>
> SELECT * FROM sample21;
>
> 다음 명령문에는 몇 가지 단어가 쓰였습니다. **SELECT와 FROM이 구를 결정하는 키워드이자 예약어**입니다. **'*' 역시 예약어입니다**. sample21은 테이블 이름으로, 예제 DB를 만들 때 임의로 지정한 것입니다.
>
> DB에는 테이블 외에 다양한 데이터를 저장하거나 관리하는 '어떤 것'을 만들 수 있습니다. 이것을 '데이터베이스 객체'라고 하는데, 예를 들어 뷰(Veiw)가 있습니다. **DB 객체는 이름을 붙여 관리합니다. 같은 이름으로 다른 DB 객체는 만들 수 없습니다.** 예를 들어, sample21이 기존 DB 내에 존재 하는 테이블이므로, sample21이라는 이름으로 새로운 테이블을 만들려고하면 *'이미 테이블이 정의되어 있다'* 라는 에러가 발생하고 만들어지지 않습니다. 또한 **통상적으로 DB 객체명에는 예약어와 동일한 이름을 사용할 수 없습니다.**

##### 대소문자 구별

- **예약어와 데이터베이스 객체명은 대소문자를 구별하지 않습니다.**

- ```mysql
  SELECT * FROM SAMPLE21;
  select * from sample21;
  Select * From Sample21;
  ```

- 위는 모두 동일하게 동작합니다. 이후 예약어는 대문자로, DB 객체명은 소문자로 표기합니다.



### 4.4 Hello World를 실행한 결과 = 테이블

> SELECT 명령을 실행하면 표 형식의 데이터가 출력됩니다. **표형식의 데이터는 '행(레코드)'과 '열(컬럼/필드)'로 구성**됩니다. 행은 모두 동일한 형태로 되어 있으며 옆으로 열이 나열되는데, 열마다 이름이 지정되어 있습니다. **각각의 행과 열이 만나는 부분을 '셀'**이라고 부릅니다. 셀에는 하나의 데이터 값이 저장되어 있습니다.
>
> Hello World를 실행하면 sample21 테이블의 모든 행과 열의 데이터를 화면에 표시합니다. sample21 테이블은 총 4개의 열을 가집니다. 왼쪽부터 'no' 라는 이름의 열은 1,2,3 처럼 연속하는 숫자로 이루어 집니다. 이처럼 **숫자만 구성된 데이터를 '수치형' 데이터**라고 합니다. 수치형 데이터는 오른쪽 정렬로 표시됩니다. 'no' 옆의 'name'이라는 열에는 사람이름이 저장되어 있습니다. 이처럼 **임의의 문자로 구성된 데이터를 '문자열형' 데이터**라고 부릅니다. 문자형은 왼쪽 정렬로 표시됩니다. 다음 열인 'birthday'에는 날짜 데이터가 저장되어 있습니다.  이와 같이 **날짜와 시각을 나타내는 데이터를 '날짜시간형' 데이터**라고 하며, 왼쪽 정렬됩니다. 그리고 **각 열은 하나의 자료형만 가질 수 있습니다**. 따라서 수치형의 열에 문자형의 데이터를 저장할 수는 없습니다.



### 4.5 값이 없는 데이터 = NULL

>  SELECT의 결과를 잘 살펴보면 셀의 값이 'NULL' 로 표시된 부분이 있습니다. **NULL은 특별한 데이터 값으로 아무것도 저장되어 있지 않은 상태를 의미**합니다. NULL은 SQL에서 대단히 중요한 개념입니다.



## 5강 테이블 구조 참조하기

> 여기에서는 DESC 명령으로 테이블 구조를 참조하는 방법에 대해 설명하겠습니다. SELECT 명령을 테이블의 데이터를 읽어왔습니다. 테이블은 한 개 이상의 열로 구성됩니다. Hello World의 SELECT 명령에서는 생략했지만, **열을 지정하여 조건을 붙이거나 특정 열의 값을 읽어올 수 있습니다**. 테이블에 어떤 열이 없는지 참조할 수 있다면 SELECT 명령을 작성하기 쉬워집니다. 지금은 DESC 명령으로 테이블 구조를 참조하는 방법을 알아보겠습니다.



### 5.1 DESC 명령

```mysql
mysql>DESC sample21;
```

---

결과

| Field    | Type        | Null | Key  | Default | Extra |
| -------- | ----------- | ---- | ---- | ------- | ----- |
| no       | int(11)     | YES  |      | NULL    |       |
| name     | varchar(20) | YES  |      | NULL    |       |
| birthday | date        | YES  |      | NULL    |       |
| address  | varchar(40) | YES  |      | NULL    |       |

4 rows in set (0.00 sec)

---

>  DESC 명령으로 테이블에 어떤 열이 정의되어 있는지 알 수 있습니다. 단, DESC는 SQL 명령이 아닙니다.
>
> Field에는 열 이름이 표시되며, Type은 해당 열의 '자료형'을 나타냅니다. int는 Integer(정수)를 의미합니다. 괄호 안의 숫자는 최대 길이를 나타내는데, **int(11)은 '11자리의 정수값을 저장할 수 있는 자료형'** 이라는 의미입니다.
>
> Null은 NULL 값을 허용할 것인지를 나타내는 제약사항으로 YES로 지정하면 NULL값을 허용하게 됩니다.
>
> Key는 해당 열이 '키'로 지정되어 있는지를 나타냅니다. Key는 우선 행을 특정하기 위해 사용할 수 있는 열이라고만 설명하겠습니다.
>
> Default는 그 열에 주어진 '기본값', 즉 생략햇을 경우 적용되는 값입니다. 테이블에 행을 추가할 때 열의 데이터 값을 생략하면 이 값으로 채워집니다.



### 5.2 자료형

> 테이블은 하나 이상의 열로 구성되며 DESC 명령으로 그 구조를 참조할 수 있다는 것을 알았습니다. 열은 몇 가지 속성을 지정할 수 있는데 그중 가장 중요한 속성은 **'자료형'**입니다. 이제 자료형에 대해 더 상세하게 다뤄보겠습다.

- INTEGER 형
  - **INTEGER 형은 수치형의 하나로 정수값을 저장할 수 있는 자료형**입니다. 소숫점은 포함할 수 없습니다.
- CHAR 형
  - **CHAR 형은 문자열형의 하나로 문자열을 저장할 수 있는 자료형**입니다. *문자열 형에서는 열의 최대 길이를 지정해야 합니다* . CHAR(10)으로 자료형을 지정했을 경우 최대 10문자로 된 문자열을 저장할 수 있으며 11문자로 된 문자열은 저장할 수 없습니다.
  - 다음의 VARCHAR 형은 저장할 문자열의 길이에 맞춰 저장공간을 가변적으로 사용하여 저장합니다. 반면 **CAHR 형은 언제나 고정된 길이로 데이터가 저장**됩니다. 그래서 CHAR 형을 '고정 길이 문자열' 자료형이라고도 합니다. **CHAR형에서는 길이가 고정되기 때문에 최대 길이보다 작은 문자열을 저장할 경우 공백 문자로 나머지를 채운 후 저장**하게됩니다.
- VARCHAR 형
  - **VARCHAR 형 역시 문자열을 저장할 수 있는 자료형**입니다. **최대 길이를 지정하는 점은 CHAR형과 같지만 CHAR 형과 달리 데이터 크기에 맞춰 저장공간의 크기도 변경**됩니다. 그래서 VARCHAR형을 '가변 길이 문자열' 자료형이라고도 합니다.
- DATE 형
  - DATE 형은 날짜 값을 저장할 수 있는 자료형입니다. 날짜값이란 '2013년 3월 23일' 과 같이 연월일의 데이터를 저장할 수 있는 형입니다.
- TIME 형
  - TIME 형은 시간을 저장할 수 있는 자료형입니다. 예를 들어 '12시 30분 20초' 와 같이 시분초의 데이터를 저장할 수 있는 형입니다.



## 6강 검색 조건 지정하기

> 조건을 지정하여 데이터를 지정하는 검색 방법에 대해 알아보겠습니다. 데이터 검색에는 열을 지정하는 방법과 행을 지정하는 방법이 있습니다.
>
> ```mysql
> SELECT 열1, 열2 FROM 테이블명 WHERE 조건식
> ```
>
> 예제 DB의 sample21에는 저장된 행이 적습니다만 통상적인 DB라면 많은 행이 있을 것입니다. 화면에 표시하여 데이터를 확인할 수 있는데, 한번에 볼 수 있는 데이터양은 한정되어 있습니다. **화면에 표시할 때는 행이나 열을 선택하여 DB에서 데이터를 읽어오는, 다시말해 '검색'이 빈번하게 일어납니다**. ***행을 선택할 때는 WHERE 구를 사용*** 하며, ***열을 선택할 때는 SELECT 구를 사용*** 합니다.



### 6.1 SELECT 구에서 열 지정하기

> 데이터를 선택할 때는 열이나 행을 한정합니다. 먼저, 열을 한정하는 방법에 대해서 알아보겠습니다. Hello World의 SELECT 명령에서는 *을 사용하여 sample21의 모든 열을 취득했습니다. 열을 한정하기 위해서는 * 부분에 열명을 지정합니다.
>
> ```mysql
> SELECT 열1, 열2 FROM 테이블명
> ```
>
> 위의 구문처럼 콤마(,)를 이용하여 구분지으며 여러개를 지정할 수 있습니다. 지정한 열만 결과값으로 표시됩니다.
>
> **SELECT FROM sample21; 과 같이 열을 전혀 지정하지 않으면 구문 에러가 발생**합니다. 또한 **테이블에 존재하지 않는 열을 지정해도 에러가 발생**합니다. 열 지정 순서는 임의로 정할 수 있습니다. 테이블에서 열이 정의된 순서와 동일한 순으로 지정할 필요는 없습니다. 'SELECT no, no, no FROM sample21' 과 같이 **동일한 열을 중복해서 지정해도 무관**합니다.

```mysql
SELECT no, name FROM sample21
```

---

결과

| no   | name   |
| ---- | ------ |
| 1    | 박준용 |
| 2    | 김재진 |
| 3    | 홍길동 |

---



### 6.2 WHERE 구에서 행 지정하기

> 테이블의 열은 많아야 몇 십개 정도지만 행은 열에 비해 훨씬 많을 수 있습니다. DB 규모에 따라 다르지만 일반적으로 수백 건에서 대규모의 경우 수천만 건의 행에 달하는 경우도 있습니다. 이처럼 많은 행 속에서 필요한 데이터만 검색하기 위해서는 WHERE 구를 사용합니다. WHERE 구는 FROM 구의 뒤에 표기합니다. 또한 검색 조건은 예약어 WHERE 뒤에 표기합니다.

``` mysql
SELECT 열 FROM 테이블명 WHERE 조건식
```

- 구의 순서와 생략

  - **SQL에서는 구의 순서가 정해져 있어 바꿀 수 없습니다.** FROM 구 뒤에 WHERE 구를 표기합니다. 대신 구에는 WHERE 구처럼 생략 가능한 것도 있습니다. 만약 WHERE 구를 생략한 경우는 테이블 내의 모든 행이 검색 대상이 됩니다.

- WHERE 구

  - 조건식은 '열과 연산자, 상수로 구성되는 식' 입니다. 예를 들어 아래의 WHERE 구에서 지정한 'no = 2'는 올바른 조건식입니다. 이 조건식에 일치하는 행만 SELECT의 결과로 반환됩니다. 여기서는 WHERE 구로 행만 추출하지만 SELECT 구로 열 지정을 동시에 할 수도 있습니다.

  - ```mysql
    SELECT * FROM sample21 WHERE no=2;
    ```

    ---

  - 결과

  - | no   | name   | birthday | address         |
    | ---- | ------ | -------- | --------------- |
    | 2    | 김재진 | NULL     | 대구광역시 동구 |

    ---

- 조건식

  - 조건식 'no = 2'는 no 열 값이 2일 경우에 참이 되는 조건입니다. 여기에서 조건 식을 더 자세히 살펴보겠습니다. 'no = 2' 는 'no', '=', '2' 로 나눌 수 있습니다.
  - **첫 번째 항목인 'no'는 열 이름입니다.**
  - **두번째 항목 '=' 은 연산자입니다.** 연산자란 어떤 계산을 할 지 지정하는 것으로 보통 기호로 표시합니다. =의 경우 좌우로 2개 항목이 필요한 '이항 연산자'에 해당하며 일반적으로 많이 쓰이는 기호입니다. = 연산자 기준으로 좌변과 우변의 항목을 비교하고, 같은 값이면 참을, 다른 값이면 거짓을 반환합니다. 이때 **조건식을 만족한 '참' 행만이 결과값으로 반환됩니다.**

- 값이 서로 다른 경우 '<>'

  - 비교 연산자는 = 외에도 존재합니다. 조건식에 사용하는 연산자를 바꾸거나 복수의 연산자를 조합하면 복잡한 조건식을 만들 수 있습니다.

  - ```mysql
    SELECT * FROM sample21 WHERE no <> 2;
    ```

    ---

  - 결과

  - | no   | name   | birthday   | address           |
    | ---- | ------ | ---------- | ----------------- |
    | 1    | 박준용 | 1976-10-18 | 대구광역시 수성구 |
    | 3    | 홍길동 | NULL       | 서울특별시 마포구 |

    ---

- 이와 같이 WHERE 구에서 지정한 조건식에 따라 복수의 행이 반환되는 경우도 있습니다. 만약 조건식에 일치하는 행이 전혀 없는 경우에는 아무것도 반환되지 않습니다.

### 6.3 문자열형의 상수

> 이번에는 name 열을 사용해 동일한 조건으로 검색해보겠습니다.
>
> ```mysql
> SELECT * FROM sample21 WHERE name = '박준용';
> ```
>
> ---
>
> 결과
>
> | no   | name   | birthday   | address           |
> | ---- | ------ | ---------- | ----------------- |
> | 1    | 박준용 | 1976-10-18 | 대구광역시 수성구 |
>
> ---
>
> no 열은 수치형 열입니다. 반면 name 열은 문자열 형입니다. **수치형 조건식의 경우 숫자를 그대로 조건식에 표기하지만 문자열형을 비교할 경우는 싱글쿼트(' ')로 둘러싸 표기해야 합니다.**  **날짜 시간형의 경우에도 싱글쿼트로 둘러싸 표기**합니다. 이때 *연월일을 하이픈(-)으로 구분* 합니다. 시간은 *시분초를 콜론(:) 으로 구분* 하여 표기합니다.
>
> 문자열형의 열과 비교하기 위해서는 조건으로 지정할 값도 그 자료형에 맞춰 지정해야 합니다. 한편 자료형에 맞게 표기한 상수값을 '리터럴(literal)'이라 부릅니다. 문자열 리터럴은 싱글쿼트로 둘러싸 표기합니다.



### 6.4 NULL 값 검색

> '검색' 이라고 해도 조건식을 표기하는 것 뿐이므로 간단합니다. 하지만 NULL 값을 검색할 경우에는 조금 주의해야합니다. 지금부터 NULL 값을 검색하는 방법에 관해 살펴보겠습니다.
>
> ```mysql
> SELECT * FROM sample21 WHERE birthday = NULL;
> ```
>
> ---
>
> 결과
>
> | no   | name | birthday | address |
> | ---- | ---- | -------- | ------- |
> |      |      |          |         |
>
> ---
>
> birthday 값이 NULL인 행이 있지만 '= NULL' 과 같은 조건식으로는 검색이 불가능 합니다.

- IS NULL
  
  - NULL 값을 검색할 때는 = 연산자가 아닌 'IS NULL'을 사용합니다.
  
  - ```mysql
    SELECT * FROM sample21 WHERE birthday IS NULL;
    ```
  
  - | no   | name   | birthday | address           |
    | ---- | ------ | -------- | ----------------- |
    | 2    | 김재진 | NULL     | 대구광역시 동구   |
    | 3    | 홍길동 | NULL     | 서울특별시 마포구 |
  
  - 반대로 NULL이 아닌 행을 검색하고 싶다면 'IS NOT NULL'을 사용하면 됩니다.



### 6.5 비교 연산자

> WHERE 구로 지정하는 조건식은 참과 거짓을 반환하는 비교 연산자나 술어를 사용해서 표기할 수 있습니다. SQL에서는 많은 연산자 술어를 사용할 수 있는데, 대표적인 비교 연산자를 소개합니다.

- = 연산자
- <> 연산자
- \> 연산자
- \>= 연산자
  - 등호가 들어간 연산자는 스페이스를 넣어서는 안됩니다.
- < 연산자
- <= 연산자

